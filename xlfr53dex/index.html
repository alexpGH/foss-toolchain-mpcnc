<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Blender export & 3D analyis - foss-toolchain-mpcnc</title>
  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Blender export & 3D analyis";
    var mkdocs_page_input_path = "xlfr53dex.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> foss-toolchain-mpcnc</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Basics</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../freecad_1/">Freecad part 1</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../firmware_1/">Controller board, firmware</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../zoom_1/">ZOOM grbl+RAMPS+auto squaring</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../bcnc_1/">bCNC</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../mill_1/">Milling part 1</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ext_1/">Freecad - ramp in, finsish pass, holding tags</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../freecad_2/">Freecad - prepare for 3D</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Blender</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../blenderMot/">Motivation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../blenderInst/">Installation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../blenderAirfoils/">Basic python scripting 4 airfoils</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../blenderKissSlope/">KissSlope project</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">XFLR5</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../xlfr5GettingStarted/">Getting started</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Blender export & 3D analyis</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#export-of-complex-wing-geometries">Export of complex wing geometries</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#generating-morphed-profil-data">Generating morphed profil data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#foil-polar-mesh">Foil polar mesh</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#import-the-wing-for-3d-analyis">Import the wing for 3d analyis</a>
    </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Basic aerodynamics</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../aeroEqn/">Basic equations</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">foss-toolchain-mpcnc</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>XFLR5 &raquo;</li>
        
      
    
    <li>Blender export & 3D analyis</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="xlfr5">XLFR5</h1>
<h2 id="export-of-complex-wing-geometries">Export of complex wing geometries</h2>
<p>We'll be using the following files:</p>
<table>
<thead>
<tr>
<th>Folder</th>
<th align="left">Name</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>scripts</td>
<td align="left">wingAnalysisLib.py</td>
<td>basic worker routines for aerodynamics analysis</td>
</tr>
<tr>
<td>scripts</td>
<td align="left">wingLib.py</td>
<td>basic worker routines</td>
</tr>
<tr>
<td>planes/kissSlope</td>
<td align="left">kissSlopeWing.blend</td>
<td>the blender file</td>
</tr>
<tr>
<td>planes/kissSlope</td>
<td align="left">xflr5Analysis.py</td>
<td>the python script used to generate the input for XFLR5 3d analysis</td>
</tr>
</tbody>
</table>
<p><br><strong>xflr5Analysis.py</strong>
Target:</p>
<ul>
<li>generate a XFLR5 specific .xml file describing the wing geometry with all its sections</li>
<li>generate morphed profile data required by XFLR5 to generate whta is called the <em>foil polar mesh</em></li>
</ul>
<p>Below the obligatory header, we define the basic geometric data, the leading edge shift as well as the base sections as discussed in <a href="../blenderAirfoils#more-complex-wing-design">more complex wing design</a>.</p>
<p><a href="../assets/images/blenderScript14.png"><img alt="" src="../assets/images/blenderScript14.png" title="" /></a></p>
<p><br>The magic the happens in L.131 - generating the xml sceletton required for XFLR5, adding the subsections according to the definition (l. 132) and writing the xml file (l.137ff):</p>
<p><a href="../assets/images/blenderScript15.png"><img alt="" src="../assets/images/blenderScript15.png" title="" /></a></p>
<p><br></p>
<h2 id="generating-morphed-profil-data">Generating morphed profil data</h2>
<p>The wing geometry we defined above makes use of morphed profiles for the subsections.
For the XFLR5 3D analysis, we need the related 2D profil data to generate what is called the <em>foil polar mesh</em>. Please have a look at André's <a href="https://www.youtube.com/watch?v=QfGSKCrv-Ps&amp;list=PLtl5ylS6jdP6uOxzSJKPnUsvMbkmalfKg&amp;index=7">tutorial No6</a> and <a href="http://www.xflr5.tech/docs/Point_Out_Of_Flight_Envelope.pdf">docs</a> for details. </p>
<p>The attentive reader might already have spotted l.66: <code>roundTo=0.05</code>.
This setting is used to reduce the necessary amount of profile data required. A setting of 0.05 means that we use 5% steps for the morphed profiles. The local profile along the subsections use the next available profile along this 5% grid.
<br>Execute l.160ff once to generate all the required profile data files in the directory configured in l.165.</p>
<p><a href="../assets/images/blenderScript16.png"><img alt="" src="../assets/images/blenderScript16.png" title="" /></a></p>
<p>The result for the AG26 &lt;-&gt; AG14 morph is:<br> 
<a href="../assets/images/blenderScript17.png"><img alt="" src="../assets/images/blenderScript17.png" title="" /></a></p>
<h2 id="foil-polar-mesh">Foil polar mesh</h2>
<ul>
<li>start XFLR5 in</li>
<li>switch to xfoil direct analysis</li>
<li>file &gt; open &gt; select all the written .dat files</li>
<li>analysis &gt; multi threaded batch analysis</li>
<li>select all profiles (and the unmorphed ones, in our case AG25, AG26, and AG14)</li>
<li>define a sensible Re range</li>
<li>run the batch analysis (this will take a while)</li>
</ul>
<p>After the analysis finished</p>
<ul>
<li>select each profile in the drop down menue</li>
<li>hit crtl+u and control the quality of each polar</li>
<li>correct if necessary (for the AGxx, I sometimes needed to delete points at <span class="arithmatex">\(\alpha=-2.5°\)</span> and re-calculate with finer angualr steps for <span class="arithmatex">\(\alpha&gt;0\)</span>  for some polars</li>
</ul>
<p>I added the resulting XFLR5 file (for the kissSlope wing analyis) on github as <a href="https://github.com/alexpGH/blenderCadCamTools/blob/main/planes/xflr5/KDesign_polarMesh.xfl">KDesign_polarMesh.xfl</a>.</p>
<h2 id="import-the-wing-for-3d-analyis">Import the wing for 3d analyis</h2>
<ul>
<li>start XFLR5</li>
<li>open the KDesign_polarMesh.xfl - or generate your own polar for the required Re range</li>
<li>file &gt; wing and plane design</li>
<li>plane &gt; import plane from xml file</li>
</ul>
<p>Should display the wing:</p>
<p><a href="../assets/images/blenderScript18.png"><img alt="" src="../assets/images/blenderScript18.png" title="" /></a></p>
<ul>
<li>plane &gt; current plane &gt; edit wing
Should display all the defined sections:</li>
</ul>
<p><a href="../assets/images/blenderScript19.png"><img alt="" src="../assets/images/blenderScript19.png" title="" /></a></p>
<p>Next:</p>
<ul>
<li>analysis &gt; define analysis</li>
<li>select type2</li>
<li>on tab <em>inertia</em> set the palne mass (for the kissSlope 0.9 or 1.3kg) &gt; save</li>
<li>in the plane analysis window set the angular region &gt; hit analyze</li>
</ul>
<p>The log output provides interesting information:
In my case the analysis had errors, namely at higher <span class="arithmatex">\(alpha\)</span>. This is where separation occurs and XFLR5 can not find the related operating point in the 2D data:
<a href="../assets/images/blenderScript20.png"><img alt="" src="../assets/images/blenderScript20.png" title="" /></a></p>
<p>This tells us that starting from <span class="arithmatex">\(\alpha=10.5°\)</span>, separation occurs, luckily from the root region (small span pos values), with the separation growing for increasing <span class="arithmatex">\(alpha\)</span>.</p>
<ul>
<li>hit close</li>
</ul>
<p>and have a look at the polars
<a href="../assets/images/blenderScript20.png"><img alt="" src="../assets/images/blenderScript21.png" title="" /></a></p>
<p>the 3D visualization</p>
<p><a href="../assets/images/blenderScript20.png"><img alt="" src="../assets/images/blenderScript22.png" title="" /></a></p>
<p>and all the other stuff.</p>
<p>See André's <a href="https://www.youtube.com/playlist?list=PLtl5ylS6jdP6uOxzSJKPnUsvMbkmalfKg">tutorials</a> for more details, especially No 8.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../aeroEqn/" class="btn btn-neutral float-right" title="Basic equations">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../xlfr5GettingStarted/" class="btn btn-neutral" title="Getting started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../xlfr5GettingStarted/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../aeroEqn/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../javascripts/config.js" defer></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" defer></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
